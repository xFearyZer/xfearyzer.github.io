<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Toolkit</title>
<style>
/* --- CSS g·ªëc gi·ªØ nguy√™n t·ª´ file b·∫°n g·ª≠i --- */
/* ... (to√†n b·ªô ph·∫ßn CSS g·ªëc Adventure Toolkit ·ªü ƒë√¢y, kh√¥ng ƒë·ªïi) ... */
</style>
</head>
<body>
<div class="bg-gradient"></div>
<div class="bg-particles" id="particles"></div>
<div class="light-effect" id="lightEffect"></div>

<div class="language-switcher">
    <button class="language-btn active" id="enBtn">English</button>
    <button class="language-btn" id="viBtn">Ti·∫øng Vi·ªát</button>
</div>

<!-- Popup Key Tool -->
<div class="popup-overlay" id="keyToolPopup">
    <div class="popup">
        <h2 id="keyToolPopupTitle">Get Free Key Tool</h2>
        <div style="margin-top:10px;">
            <div style="font-weight:600;" id="countdownLabel">Th·ªùi gian c√≤n l·∫°i ƒë·ªÉ chuy·ªÉn: <span id="popupCountdown">--:--</span></div>
            <div style="font-size:0.9rem;color:rgba(255,255,255,0.7);margin-top:8px;" id="noteLabel">
                L∆∞u √Ω: Sau khi v√†o trang Key Tool, key s·∫Ω ƒë∆∞·ª£c t·∫°o m·ªôt l·∫ßn v√† <strong>kh√¥ng th·ªÉ t·∫°o th√™m</strong>. 
                N·∫øu l√†m m·ªõi trang (reload) b·∫°n s·∫Ω m·∫•t key ‚Äî h√£y l∆∞u l·∫°i tr∆∞·ªõc khi reload.
            </div>
        </div>
        <div class="popup-buttons" style="margin-top:20px;">
            <button class="popup-btn close" onclick="closeKeyToolPopup()">Back</button>
            <button class="popup-btn close-today" id="continueBtn" onclick="continueToKeyTool()">Ti·∫øp t·ª•c</button>
        </div>
    </div>
</div>

<div class="container">
    <h1 class="floating" id="mainTitle">Advanced Toolkit</h1>
    <div class="slides-container">
        <div class="slide" onclick="showKeyToolPopup()">
            <div class="slide-effect"></div>
            <div class="slide-icon">üîë</div>
            <h3 class="slide-title" id="slide1Title">Key Tool</h3>
            <p class="slide-desc" id="slide1Desc">Premium key generation and rejoin system</p>
        </div>
        <div class="slide" onclick="navigateTo('storage.index')">
            <div class="slide-effect"></div>
            <div class="slide-icon">üíª</div>
            <h3 class="slide-title" id="slide2Title">Client/Executor</h3>
            <p class="slide-desc" id="slide2Desc">Advanced client management tools</p>
        </div>
    </div>
</div>

<script>
// --- JS g·ªëc gi·ªØ nguy√™n v√† th√™m ch·ªânh s·ª≠a ---
const TOKEN_DURATION_MS = 20 * 60 * 1000;
let _tokenData = { token: null, exp: 0 };
let _popupInterval = null;

function showKeyToolPopup() { openKeyToolPopup(); }
function openKeyToolPopup() { generateToken(); document.getElementById('keyToolPopup').classList.add('active'); }
function closeKeyToolPopup() { document.getElementById('keyToolPopup').classList.remove('active'); stopTokenCountdown(); }
function generateToken() {
    _tokenData.token = Math.random().toString(36).substring(2, 14);
    _tokenData.exp = Date.now() + TOKEN_DURATION_MS;
    updatePopupCountdown();
    startTokenCountdown();
}
function continueToKeyTool() {
    if (!_tokenData.token || !_tokenData.exp) { generateToken(); }
    const url = new URL('https://xfearyzer-keysystem.netlify.app');
    url.searchParams.set('token', _tokenData.token);
    url.searchParams.set('exp', _tokenData.exp.toString());
    stopTokenCountdown();
    window.location.href = url.toString();
}
function updatePopupCountdown() {
    const rem = _tokenData.exp - Date.now();
    if (rem <= 0) { generateToken(); return; }
    const mm = Math.floor(rem / 60000);
    const ss = Math.floor((rem % 60000) / 1000);
    document.getElementById('popupCountdown').textContent = `${String(mm).padStart(2,'0')}:${String(ss).padStart(2,'0')}`;
}
function startTokenCountdown() { stopTokenCountdown(); _popupInterval = setInterval(updatePopupCountdown, 1000); }
function stopTokenCountdown() { if (_popupInterval) { clearInterval(_popupInterval); _popupInterval = null; } }

// Ng√¥n ng·ªØ
const languages = {
    en: {
        mainTitle: "Advanced Toolkit",
        slide1Title: "Key Tool",
        slide1Desc: "Premium key generation and rejoin system",
        slide2Title: "Client/Executor",
        slide2Desc: "Advanced client management tools",
        keyToolPopupTitle: "Get Free Key Tool",
        countdownLabel: "Time left to proceed: ",
        noteLabel: "Note: Once you enter the Key Tool page, the key will be generated once and cannot be generated again. If you refresh the page, you will lose the key ‚Äî save it before refreshing.",
        continueBtn: "Continue",
        backBtn: "Back"
    },
    vi: {
        mainTitle: "B·ªô C√¥ng C·ª• N√¢ng Cao",
        slide1Title: "C√¥ng C·ª• Key",
        slide1Desc: "H·ªá th·ªëng t·∫°o key v√† rejoin cao c·∫•p",
        slide2Title: "Client/Executor",
        slide2Desc: "C√¥ng c·ª• qu·∫£n l√Ω client n√¢ng cao",
        keyToolPopupTitle: "L·∫•y Key Tool Mi·ªÖn Ph√≠",
        countdownLabel: "Th·ªùi gian c√≤n l·∫°i ƒë·ªÉ chuy·ªÉn: ",
        noteLabel: "L∆∞u √Ω: Sau khi v√†o trang Key Tool, key s·∫Ω ƒë∆∞·ª£c t·∫°o m·ªôt l·∫ßn v√† kh√¥ng th·ªÉ t·∫°o th√™m. N·∫øu l√†m m·ªõi trang (reload) b·∫°n s·∫Ω m·∫•t key ‚Äî h√£y l∆∞u l·∫°i tr∆∞·ªõc khi reload.",
        continueBtn: "Ti·∫øp t·ª•c",
        backBtn: "Quay l·∫°i"
    }
};

function changeLanguage(lang) {
    document.getElementById('mainTitle').textContent = languages[lang].mainTitle;
    document.getElementById('slide1Title').textContent = languages[lang].slide1Title;
    document.getElementById('slide1Desc').textContent = languages[lang].slide1Desc;
    document.getElementById('slide2Title').textContent = languages[lang].slide2Title;
    document.getElementById('slide2Desc').textContent = languages[lang].slide2Desc;
    document.getElementById('keyToolPopupTitle').textContent = languages[lang].keyToolPopupTitle;
    document.getElementById('countdownLabel').childNodes[0].textContent = languages[lang].countdownLabel;
    document.getElementById('noteLabel').textContent = languages[lang].noteLabel;
    document.getElementById('continueBtn').textContent = languages[lang].continueBtn;
    document.querySelector('#keyToolPopup .popup-buttons .popup-btn.close').textContent = languages[lang].backBtn;
    localStorage.setItem('language', lang);
}
document.getElementById('enBtn').addEventListener('click', () => changeLanguage('en'));
document.getElementById('viBtn').addEventListener('click', () => changeLanguage('vi'));

window.addEventListener('DOMContentLoaded', () => {
    const lang = localStorage.getItem('language') || 'en';
    changeLanguage(lang);
});
</script>
</body>
</html>