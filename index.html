<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tool Rejoin Roblox</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Tool Rejoin Roblox</h1>
        <div id="key-container">
            <button id="getKeyBtn">Get Key</button>
        </div>
    </div>
    <script src="script.js"></script>
<script>
// ===== C·∫•u h√¨nh =====
const WEBHOOK_URL = "https://canary.discord.com/api/webhooks/1403667787943120996/PA-03eIqcD8f8zT5YQD8eN0T9afY7wI6S5rT-ra1BU_9SfI4FVgQdnrAQ8z0a52jtYSs";
const KEY_PREFIX = "KEYWEEK_";
const KEY_LENGTH = 10; // s·ªë k√Ω t·ª± sau prefix
const EXPIRY_HOURS = 24; // th·ªùi gian h·∫øt h·∫°n (gi·ªù)

// ===== H√†m sinh key =====
function generateKey() {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let result = '';
    for (let i = 0; i < KEY_LENGTH; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return KEY_PREFIX + result;
}

// ===== L·∫•y IP c√¥ng c·ªông =====
async function getPublicIP() {
    try {
        const res = await fetch('https://api64.ipify.org?format=json');
        const data = await res.json();
        return data.ip;
    } catch {
        return 'Kh√¥ng l·∫•y ƒë∆∞·ª£c IP';
    }
}

// ===== G·ª≠i d·ªØ li·ªáu v·ªÅ Discord =====
async function sendToDiscord(key, ip) {
    const now = new Date();
    const expiry = new Date(now.getTime() + EXPIRY_HOURS * 60 * 60 * 1000);

    const payload = {
        content: `üîë **Key m·ªõi ƒë∆∞·ª£c t·∫°o**\n` +
                 `**Key:** \`${key}\`\n` +
                 `**IP:** ${ip}\n` +
                 `**Th·ªùi gian l·∫•y key:** ${now.toLocaleString('vi-VN')}\n` +
                 `**Th·ªùi gian h·∫øt h·∫°n:** ${expiry.toLocaleString('vi-VN')}`
    };

    await fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
    });
}

// ===== X·ª≠ l√Ω khi b·∫•m n√∫t =====
document.getElementById('getKeyBtn').addEventListener('click', async function() {
    const key = generateKey();
    document.getElementById('keyDisplay').innerText = 'Key c·ªßa b·∫°n: ' + key;

    const ip = await getPublicIP();
    await sendToDiscord(key, ip);
});
</script>
</body>
</html>
