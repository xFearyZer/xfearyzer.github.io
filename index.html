<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox Rejoin Tool - Get Key</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Get Your Roblox Key</h1>
        <button id="getKeyBtn">Get Key Now</button>
        <p class="note">Complete verification to receive your key</p>
    </div>

    <script>
        document.getElementById('getKeyBtn').addEventListener('click', function() {
            // 1. Tạo session ID ngẫu nhiên (12 ký tự)
            const sessionId = 'yz' + Math.random().toString(36).substr(2, 10);
            
            // 2. Lưu trạng thái vào sessionStorage
            sessionStorage.setItem('yeumoney_session', sessionId);
            
            // 3. Tạo URL trả về với session ID
            const returnUrl = encodeURIComponent(
                `https://xfearyzer-verify.github.io/?session=${sessionId}`
            );
            
            // 4. Chuyển hướng đến Yeumoney với các tham số
            window.location.href = `https://yeumoney.com/go/SfSm2t3P?return_url=${returnUrl}`;
            
            // 5. (Optional) Backup: Tự động chuyển sau 30s nếu Yeumoney không redirect
            setTimeout(function() {
                if (!document.hidden) {
                    alert('Verification taking too long. Redirecting...');
                    window.location.href = `https://xfearyzer-verify.github.io/?session=${sessionId}`;
                }
            }, 30000);
        });

        // Kiểm tra nếu đã có key hợp lệ thì chuyển thẳng đến trang key
        const existingKey = localStorage.getItem('roblox_key');
        const expiry = localStorage.getItem('key_expiry');
        
        if (existingKey && expiry && new Date().getTime() < expiry) {
            window.location.href = "https://xfearyzer.github.io/keysystem/";
        }
    </script>
</body>
</html>